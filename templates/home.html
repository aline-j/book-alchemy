<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
  </head>
  <body>
    <!-- Sort -->
    <form method="GET">
      <label for="sort">Sort by:</label>
      <select name="sort" id="sort" onchange="this.form.submit()">
        <option value="title" {% if sort == "title" %}selected{% endif %}>Title</option>
        <option value="author" {% if sort == "author" %}selected{% endif %}>Author</option>
      </select>
    </form>

    <!-- Search -->
    <form method="GET" action="/">
      <input type="text" name="q" placeholder="Search books..." value="{{ keyword }}">
      <button type="submit">Search</button>
    </form>

    {% for book in books %}
    <div>
      <!-- Book title -->
      <h3>{{ book.title }}</h3>

      <!-- Delete book button -->
      <form action="{{ url_for('delete_book', book_id=book.id) }}" method="POST">
        <button type="submit" onclick="return confirm('Are you sure you want to delete this book?')">Delete Book</button>
      </form>

      <!-- Delete author button -->
      <form action="{{ url_for('delete_author', author_id=book.author.id) }}" method="POST">
        <button type="submit" onclick="return confirm('Are you sure you want to delete this author and ALL their books?')">
          Delete Author
        </button>
      </form>
    </div>
    {% endfor %}
  </body>
</html>